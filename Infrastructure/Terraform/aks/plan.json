{"format_version":"1.1","terraform_version":"1.3.7","variables":{"application":{"value":"ratemybeer"},"cluster_subnet_address_space":{"value":"10.1.2.16/28"},"environment":{"value":"dev"},"node_count":{"value":1},"version_number":{"value":"4712"}},"planned_values":{"root_module":{"resources":[{"address":"azurerm_key_vault_secret.service_bus_connection_string","mode":"managed","type":"azurerm_key_vault_secret","name":"service_bus_connection_string","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"content_type":null,"expiration_date":null,"key_vault_id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/dev-ratemybeer/providers/Microsoft.KeyVault/vaults/dev-ratemybeer","name":"servicebusconnectionstring-4712","not_before_date":null,"tags":null,"timeouts":null},"sensitive_values":{"value":true}},{"address":"azurerm_kubernetes_cluster.RateMyBeerCluster","mode":"managed","type":"azurerm_kubernetes_cluster","name":"RateMyBeerCluster","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":2,"values":{"aci_connector_linux":[],"automatic_channel_upgrade":null,"azure_active_directory_role_based_access_control":[],"azure_policy_enabled":null,"confidential_computing":[],"default_node_pool":[{"capacity_reservation_group_id":null,"custom_ca_trust_enabled":null,"enable_auto_scaling":null,"enable_host_encryption":null,"enable_node_public_ip":null,"fips_enabled":null,"host_group_id":null,"kubelet_config":[],"linux_os_config":[],"max_count":null,"message_of_the_day":null,"min_count":null,"name":"default","node_count":1,"node_network_profile":[],"node_public_ip_prefix_id":null,"node_taints":null,"only_critical_addons_enabled":null,"os_disk_type":"Managed","pod_subnet_id":null,"proximity_placement_group_id":null,"scale_down_mode":"Delete","tags":null,"temporary_name_for_rotation":null,"type":"VirtualMachineScaleSets","ultra_ssd_enabled":false,"upgrade_settings":[],"vm_size":"Standard_B2s","zones":null}],"disk_encryption_set_id":null,"dns_prefix":"ratemybeer-4712","dns_prefix_private_cluster":null,"edge_zone":null,"enable_pod_security_policy":null,"http_application_routing_enabled":null,"http_proxy_config":[],"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"image_cleaner_enabled":false,"image_cleaner_interval_hours":48,"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"linux_profile":[],"local_account_disabled":null,"location":"westeurope","maintenance_window":[],"microsoft_defender":[],"monitor_metrics":[],"name":"dev-ratemybeer-4712","network_profile":[{"ebpf_data_plane":null,"load_balancer_sku":"standard","network_plugin":"kubenet","network_plugin_mode":null,"outbound_type":"loadBalancer"}],"oidc_issuer_enabled":null,"oms_agent":[],"open_service_mesh_enabled":null,"private_cluster_enabled":false,"private_cluster_public_fqdn_enabled":false,"public_network_access_enabled":true,"resource_group_name":"dev-ratemybeer","role_based_access_control_enabled":true,"run_command_enabled":true,"service_principal":[],"sku_tier":"Free","storage_profile":[],"tags":null,"timeouts":null,"web_app_routing":[],"workload_autoscaler_profile":[],"workload_identity_enabled":false},"sensitive_values":{"aci_connector_linux":[],"api_server_access_profile":[],"api_server_authorized_ip_ranges":[],"auto_scaler_profile":[],"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"default_node_pool":[{"kubelet_config":[],"linux_os_config":[],"node_labels":{},"node_network_profile":[],"upgrade_settings":[]}],"http_proxy_config":[],"identity":[{}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":[],"kube_config":[],"kubelet_identity":[],"linux_profile":[],"maintenance_window":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"ip_versions":[],"load_balancer_profile":[],"nat_gateway_profile":[],"pod_cidrs":[],"service_cidrs":[]}],"oms_agent":[],"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":[],"workload_autoscaler_profile":[]}},{"address":"azurerm_role_assignment.acrpull_role","mode":"managed","type":"azurerm_role_assignment","name":"acrpull_role","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"condition":null,"condition_version":null,"delegated_managed_identity_resource_id":null,"description":null,"role_definition_name":"AcrPull","scope":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/Infrastructure/providers/Microsoft.ContainerRegistry/registries/thinkexception","skip_service_principal_aad_check":true,"timeouts":null},"sensitive_values":{}},{"address":"azurerm_servicebus_namespace.ratemybeer","mode":"managed","type":"azurerm_servicebus_namespace","name":"ratemybeer","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":1,"values":{"capacity":0,"customer_managed_key":[],"identity":[],"local_auth_enabled":true,"location":"westeurope","name":"dev-ratemybeer-4712","public_network_access_enabled":true,"resource_group_name":"dev-ratemybeer","sku":"Standard","tags":null,"timeouts":null,"zone_redundant":null},"sensitive_values":{"customer_managed_key":[],"identity":[]}},{"address":"azurerm_subnet.cluster_subnet","mode":"managed","type":"azurerm_subnet","name":"cluster_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_prefixes":["10.1.2.16/28"],"delegation":[],"name":"dev-ratemybeer-4712","resource_group_name":"dev-ratemybeer","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"dev-ratemybeer"},"sensitive_values":{"address_prefixes":[false],"delegation":[]}}]}},"resource_changes":[{"address":"azurerm_key_vault_secret.service_bus_connection_string","mode":"managed","type":"azurerm_key_vault_secret","name":"service_bus_connection_string","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"content_type":null,"expiration_date":null,"key_vault_id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/dev-ratemybeer/providers/Microsoft.KeyVault/vaults/dev-ratemybeer","name":"servicebusconnectionstring-4712","not_before_date":null,"tags":null,"timeouts":null},"after_unknown":{"id":true,"resource_id":true,"resource_versionless_id":true,"value":true,"version":true,"versionless_id":true},"before_sensitive":false,"after_sensitive":{"value":true}}},{"address":"azurerm_kubernetes_cluster.RateMyBeerCluster","mode":"managed","type":"azurerm_kubernetes_cluster","name":"RateMyBeerCluster","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"aci_connector_linux":[],"automatic_channel_upgrade":null,"azure_active_directory_role_based_access_control":[],"azure_policy_enabled":null,"confidential_computing":[],"default_node_pool":[{"capacity_reservation_group_id":null,"custom_ca_trust_enabled":null,"enable_auto_scaling":null,"enable_host_encryption":null,"enable_node_public_ip":null,"fips_enabled":null,"host_group_id":null,"kubelet_config":[],"linux_os_config":[],"max_count":null,"message_of_the_day":null,"min_count":null,"name":"default","node_count":1,"node_network_profile":[],"node_public_ip_prefix_id":null,"node_taints":null,"only_critical_addons_enabled":null,"os_disk_type":"Managed","pod_subnet_id":null,"proximity_placement_group_id":null,"scale_down_mode":"Delete","tags":null,"temporary_name_for_rotation":null,"type":"VirtualMachineScaleSets","ultra_ssd_enabled":false,"upgrade_settings":[],"vm_size":"Standard_B2s","zones":null}],"disk_encryption_set_id":null,"dns_prefix":"ratemybeer-4712","dns_prefix_private_cluster":null,"edge_zone":null,"enable_pod_security_policy":null,"http_application_routing_enabled":null,"http_proxy_config":[],"identity":[{"identity_ids":null,"type":"SystemAssigned"}],"image_cleaner_enabled":false,"image_cleaner_interval_hours":48,"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"linux_profile":[],"local_account_disabled":null,"location":"westeurope","maintenance_window":[],"microsoft_defender":[],"monitor_metrics":[],"name":"dev-ratemybeer-4712","network_profile":[{"ebpf_data_plane":null,"load_balancer_sku":"standard","network_plugin":"kubenet","network_plugin_mode":null,"outbound_type":"loadBalancer"}],"oidc_issuer_enabled":null,"oms_agent":[],"open_service_mesh_enabled":null,"private_cluster_enabled":false,"private_cluster_public_fqdn_enabled":false,"public_network_access_enabled":true,"resource_group_name":"dev-ratemybeer","role_based_access_control_enabled":true,"run_command_enabled":true,"service_principal":[],"sku_tier":"Free","storage_profile":[],"tags":null,"timeouts":null,"web_app_routing":[],"workload_autoscaler_profile":[],"workload_identity_enabled":false},"after_unknown":{"aci_connector_linux":[],"api_server_access_profile":true,"api_server_authorized_ip_ranges":true,"auto_scaler_profile":true,"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"default_node_pool":[{"kubelet_config":[],"kubelet_disk_type":true,"linux_os_config":[],"max_pods":true,"node_labels":true,"node_network_profile":[],"orchestrator_version":true,"os_disk_size_gb":true,"os_sku":true,"upgrade_settings":[],"vnet_subnet_id":true,"workload_runtime":true}],"fqdn":true,"http_application_routing_zone_name":true,"http_proxy_config":[],"id":true,"identity":[{"principal_id":true,"tenant_id":true}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":true,"kube_admin_config_raw":true,"kube_config":true,"kube_config_raw":true,"kubelet_identity":true,"kubernetes_version":true,"linux_profile":[],"maintenance_window":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"dns_service_ip":true,"docker_bridge_cidr":true,"ip_versions":true,"load_balancer_profile":true,"nat_gateway_profile":true,"network_mode":true,"network_policy":true,"pod_cidr":true,"pod_cidrs":true,"service_cidr":true,"service_cidrs":true}],"node_resource_group":true,"node_resource_group_id":true,"oidc_issuer_url":true,"oms_agent":[],"portal_fqdn":true,"private_dns_zone_id":true,"private_fqdn":true,"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":true,"workload_autoscaler_profile":[]},"before_sensitive":false,"after_sensitive":{"aci_connector_linux":[],"api_server_access_profile":[],"api_server_authorized_ip_ranges":[],"auto_scaler_profile":[],"azure_active_directory_role_based_access_control":[],"confidential_computing":[],"default_node_pool":[{"kubelet_config":[],"linux_os_config":[],"node_labels":{},"node_network_profile":[],"upgrade_settings":[]}],"http_proxy_config":[],"identity":[{}],"ingress_application_gateway":[],"key_management_service":[],"key_vault_secrets_provider":[],"kube_admin_config":true,"kube_admin_config_raw":true,"kube_config":true,"kube_config_raw":true,"kubelet_identity":[],"linux_profile":[],"maintenance_window":[],"microsoft_defender":[],"monitor_metrics":[],"network_profile":[{"ip_versions":[],"load_balancer_profile":[],"nat_gateway_profile":[],"pod_cidrs":[],"service_cidrs":[]}],"oms_agent":[],"service_principal":[],"storage_profile":[],"web_app_routing":[],"windows_profile":[],"workload_autoscaler_profile":[]}}},{"address":"azurerm_role_assignment.acrpull_role","mode":"managed","type":"azurerm_role_assignment","name":"acrpull_role","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"condition":null,"condition_version":null,"delegated_managed_identity_resource_id":null,"description":null,"role_definition_name":"AcrPull","scope":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/Infrastructure/providers/Microsoft.ContainerRegistry/registries/thinkexception","skip_service_principal_aad_check":true,"timeouts":null},"after_unknown":{"id":true,"name":true,"principal_id":true,"principal_type":true,"role_definition_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"azurerm_servicebus_namespace.ratemybeer","mode":"managed","type":"azurerm_servicebus_namespace","name":"ratemybeer","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"capacity":0,"customer_managed_key":[],"identity":[],"local_auth_enabled":true,"location":"westeurope","name":"dev-ratemybeer-4712","public_network_access_enabled":true,"resource_group_name":"dev-ratemybeer","sku":"Standard","tags":null,"timeouts":null,"zone_redundant":null},"after_unknown":{"customer_managed_key":[],"default_primary_connection_string":true,"default_primary_key":true,"default_secondary_connection_string":true,"default_secondary_key":true,"endpoint":true,"id":true,"identity":[],"minimum_tls_version":true},"before_sensitive":false,"after_sensitive":{"customer_managed_key":[],"default_primary_connection_string":true,"default_primary_key":true,"default_secondary_connection_string":true,"default_secondary_key":true,"identity":[]}}},{"address":"azurerm_subnet.cluster_subnet","mode":"managed","type":"azurerm_subnet","name":"cluster_subnet","provider_name":"registry.terraform.io/hashicorp/azurerm","change":{"actions":["create"],"before":null,"after":{"address_prefixes":["10.1.2.16/28"],"delegation":[],"name":"dev-ratemybeer-4712","resource_group_name":"dev-ratemybeer","service_endpoint_policy_ids":null,"service_endpoints":null,"timeouts":null,"virtual_network_name":"dev-ratemybeer"},"after_unknown":{"address_prefixes":[false],"delegation":[],"enforce_private_link_endpoint_network_policies":true,"enforce_private_link_service_network_policies":true,"id":true,"private_endpoint_network_policies_enabled":true,"private_link_service_network_policies_enabled":true},"before_sensitive":false,"after_sensitive":{"address_prefixes":[false],"delegation":[]}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.3.7","values":{"root_module":{"resources":[{"address":"data.azurerm_container_registry.container_registry","mode":"data","type":"azurerm_container_registry","name":"container_registry","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"admin_enabled":false,"admin_password":null,"admin_username":null,"data_endpoint_enabled":false,"id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/Infrastructure/providers/Microsoft.ContainerRegistry/registries/thinkexception","location":"westeurope","login_server":"thinkexception.azurecr.io","name":"thinkexception","resource_group_name":"Infrastructure","sku":"Basic","tags":{},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_key_vault.ratemybeer","mode":"data","type":"azurerm_key_vault","name":"ratemybeer","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"access_policy":[],"enable_rbac_authorization":true,"enabled_for_deployment":false,"enabled_for_disk_encryption":false,"enabled_for_template_deployment":false,"id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/dev-ratemybeer/providers/Microsoft.KeyVault/vaults/dev-ratemybeer","location":"westeurope","name":"dev-ratemybeer","network_acls":[],"public_network_access_enabled":true,"purge_protection_enabled":false,"resource_group_name":"dev-ratemybeer","sku_name":"standard","tags":{},"tenant_id":"dd260fc6-d569-432e-b337-a82e5edca406","timeouts":null,"vault_uri":"https://dev-ratemybeer.vault.azure.net/"},"sensitive_values":{"access_policy":[],"network_acls":[],"tags":{}}},{"address":"data.azurerm_resource_group.ratemybeer","mode":"data","type":"azurerm_resource_group","name":"ratemybeer","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/dev-ratemybeer","location":"westeurope","name":"dev-ratemybeer","tags":{},"timeouts":null},"sensitive_values":{"tags":{}}},{"address":"data.azurerm_virtual_network.ratemybber","mode":"data","type":"azurerm_virtual_network","name":"ratemybber","provider_name":"registry.terraform.io/hashicorp/azurerm","schema_version":0,"values":{"address_space":["10.1.0.0/22"],"dns_servers":[],"guid":"9f6f2099-db6a-434b-bfe2-ea3f199f55af","id":"/subscriptions/09c6ad5e-028b-47ab-9c88-b6d6ce497a89/resourceGroups/dev-ratemybeer/providers/Microsoft.Network/virtualNetworks/dev-ratemybeer","location":"westeurope","name":"dev-ratemybeer","resource_group_name":"dev-ratemybeer","subnets":["dev-ratemybeer-4711"],"tags":{},"timeouts":null,"vnet_peerings":{},"vnet_peerings_addresses":[]},"sensitive_values":{"address_space":[false],"dns_servers":[],"subnets":[false],"tags":{},"vnet_peerings":{},"vnet_peerings_addresses":[]}}]}}},"configuration":{"provider_config":{"azurerm":{"name":"azurerm","full_name":"registry.terraform.io/hashicorp/azurerm","version_constraint":"\u003e= 2.26.0","expressions":{"features":[{}]}},"helm":{"name":"helm","full_name":"registry.terraform.io/hashicorp/helm","version_constraint":"\u003e= 2.2.0"},"kubectl":{"name":"kubectl","full_name":"registry.terraform.io/gavinbunney/kubectl","version_constraint":"\u003e= 1.7.0"}},"root_module":{"resources":[{"address":"azurerm_key_vault_secret.service_bus_connection_string","mode":"managed","type":"azurerm_key_vault_secret","name":"service_bus_connection_string","provider_config_key":"azurerm","expressions":{"key_vault_id":{"references":["data.azurerm_key_vault.ratemybeer.id","data.azurerm_key_vault.ratemybeer"]},"name":{"references":["var.version_number"]},"value":{"references":["azurerm_servicebus_namespace.ratemybeer.default_primary_connection_string","azurerm_servicebus_namespace.ratemybeer"]}},"schema_version":0},{"address":"azurerm_kubernetes_cluster.RateMyBeerCluster","mode":"managed","type":"azurerm_kubernetes_cluster","name":"RateMyBeerCluster","provider_config_key":"azurerm","expressions":{"default_node_pool":[{"name":{"constant_value":"default"},"node_count":{"references":["var.node_count"]},"vm_size":{"constant_value":"Standard_B2s"},"vnet_subnet_id":{"references":["azurerm_subnet.cluster_subnet.id","azurerm_subnet.cluster_subnet"]}}],"dns_prefix":{"references":["var.version_number"]},"identity":[{"type":{"constant_value":"SystemAssigned"}}],"location":{"references":["data.azurerm_resource_group.ratemybeer.location","data.azurerm_resource_group.ratemybeer"]},"name":{"references":["var.environment","var.application","var.version_number"]},"network_profile":[{"network_plugin":{"constant_value":"kubenet"}}],"resource_group_name":{"references":["data.azurerm_resource_group.ratemybeer.name","data.azurerm_resource_group.ratemybeer"]}},"schema_version":2},{"address":"azurerm_role_assignment.acrpull_role","mode":"managed","type":"azurerm_role_assignment","name":"acrpull_role","provider_config_key":"azurerm","expressions":{"principal_id":{"references":["azurerm_kubernetes_cluster.RateMyBeerCluster.kubelet_identity[0].object_id","azurerm_kubernetes_cluster.RateMyBeerCluster.kubelet_identity[0]","azurerm_kubernetes_cluster.RateMyBeerCluster.kubelet_identity","azurerm_kubernetes_cluster.RateMyBeerCluster"]},"role_definition_name":{"constant_value":"AcrPull"},"scope":{"references":["data.azurerm_container_registry.container_registry.id","data.azurerm_container_registry.container_registry"]},"skip_service_principal_aad_check":{"constant_value":true}},"schema_version":0},{"address":"azurerm_servicebus_namespace.ratemybeer","mode":"managed","type":"azurerm_servicebus_namespace","name":"ratemybeer","provider_config_key":"azurerm","expressions":{"location":{"references":["data.azurerm_resource_group.ratemybeer.location","data.azurerm_resource_group.ratemybeer"]},"name":{"references":["var.environment","var.application","var.version_number"]},"resource_group_name":{"references":["data.azurerm_resource_group.ratemybeer.name","data.azurerm_resource_group.ratemybeer"]},"sku":{"constant_value":"Standard"}},"schema_version":1},{"address":"azurerm_subnet.cluster_subnet","mode":"managed","type":"azurerm_subnet","name":"cluster_subnet","provider_config_key":"azurerm","expressions":{"address_prefixes":{"references":["var.cluster_subnet_address_space"]},"name":{"references":["var.environment","var.application","var.version_number"]},"resource_group_name":{"references":["data.azurerm_resource_group.ratemybeer.name","data.azurerm_resource_group.ratemybeer"]},"virtual_network_name":{"references":["data.azurerm_virtual_network.ratemybber.name","data.azurerm_virtual_network.ratemybber"]}},"schema_version":0},{"address":"data.azurerm_container_registry.container_registry","mode":"data","type":"azurerm_container_registry","name":"container_registry","provider_config_key":"azurerm","expressions":{"name":{"constant_value":"thinkexception"},"resource_group_name":{"constant_value":"Infrastructure"}},"schema_version":0},{"address":"data.azurerm_key_vault.ratemybeer","mode":"data","type":"azurerm_key_vault","name":"ratemybeer","provider_config_key":"azurerm","expressions":{"name":{"references":["var.environment","var.application"]},"resource_group_name":{"references":["data.azurerm_resource_group.ratemybeer.name","data.azurerm_resource_group.ratemybeer"]}},"schema_version":0},{"address":"data.azurerm_resource_group.ratemybeer","mode":"data","type":"azurerm_resource_group","name":"ratemybeer","provider_config_key":"azurerm","expressions":{"name":{"references":["var.environment","var.application"]}},"schema_version":0},{"address":"data.azurerm_virtual_network.ratemybber","mode":"data","type":"azurerm_virtual_network","name":"ratemybber","provider_config_key":"azurerm","expressions":{"name":{"references":["var.environment","var.application"]},"resource_group_name":{"references":["data.azurerm_resource_group.ratemybeer.name","data.azurerm_resource_group.ratemybeer"]}},"schema_version":0}],"variables":{"application":{"default":"ratemybeer"},"cluster_subnet_address_space":{},"environment":{},"node_count":{},"version_number":{}}}},"relevant_attributes":[{"resource":"data.azurerm_virtual_network.ratemybber","attribute":["name"]},{"resource":"azurerm_subnet.cluster_subnet","attribute":["id"]},{"resource":"azurerm_kubernetes_cluster.RateMyBeerCluster","attribute":["kubelet_identity",0,"object_id"]},{"resource":"data.azurerm_container_registry.container_registry","attribute":["id"]},{"resource":"data.azurerm_resource_group.ratemybeer","attribute":["name"]},{"resource":"data.azurerm_resource_group.ratemybeer","attribute":["location"]},{"resource":"data.azurerm_key_vault.ratemybeer","attribute":["id"]},{"resource":"azurerm_servicebus_namespace.ratemybeer","attribute":["default_primary_connection_string"]}]}
